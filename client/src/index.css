@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Open+Sans:wght@400;500;600&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* VitaView AI - Nova Linguagem de Design Minimalista */
  /* Paleta Monocromática em Escala de Cinza */

  /* Cores Primárias */
  --charcoal-gray: #212121;
  --medium-gray: #9E9E9E;
  --light-gray: #E0E0E0;
  --pure-white: #FFFFFF;
  --background-gray: #F4F4F4;
  --alert-red: #D32F2F;
  --surface-0: #F4F4F4;
  --surface-1: #FFFFFF;
  --surface-2: #F7F7F7;
  --surface-3: #EEEEEE;
  --content-strong: #212121;
  --content-default: #424242;
  --content-muted: #757575;
  --content-subtle: #9E9E9E;
  --stroke-soft: #ECECEC;
  --stroke-default: #E0E0E0;
  --stroke-strong: #C9C9C9;
  --app-background-image:
    radial-gradient(1200px circle at 8% -10%, rgba(33, 33, 33, 0.04), transparent 45%),
    radial-gradient(900px circle at 100% 0%, rgba(66, 66, 66, 0.05), transparent 42%);

  /* Mapeamento para variáveis do sistema */
  --background: 0 0% 96%;
  /* #F4F4F4 */
  --foreground: 0 0% 13%;
  /* #212121 */

  --card: 0 0% 100%;
  /* #FFFFFF */
  --card-foreground: 0 0% 13%;
  /* #212121 */

  --popover: 0 0% 100%;
  --popover-foreground: 0 0% 13%;

  /* Primary: Charcoal Gray */
  --primary: 0 0% 13%;
  /* #212121 */
  --primary-foreground: 0 0% 100%;
  /* #FFFFFF */

  /* Secondary: Medium Gray */
  --secondary: 0 0% 62%;
  /* #9E9E9E */
  --secondary-foreground: 0 0% 13%;

  --muted: 0 0% 88%;
  /* #E0E0E0 */
  --muted-foreground: 0 0% 62%;
  /* #9E9E9E */

  --accent: 0 0% 88%;
  --accent-foreground: 0 0% 13%;

  --destructive: 0 72% 51%;
  /* #D32F2F */
  --destructive-foreground: 0 0% 100%;

  --border: 0 0% 88%;
  /* #E0E0E0 */
  --input: 0 0% 88%;
  /* #E0E0E0 */
  --ring: 0 0% 13%;
  /* #212121 */
  --radius: 0.5rem;

  /* VitaView - Valores Hexadecimais para Uso Direto */
  --vitaview-primary: #212121;
  --vitaview-primary-dark: #121212;
  --vitaview-primary-light: #424242;
  --vitaview-secondary: #9E9E9E;
  --vitaview-secondary-dark: #757575;
  --vitaview-secondary-light: #BDBDBD;
  --vitaview-accent: #E0E0E0;
  --vitaview-background: #F4F4F4;
  --vitaview-error: #D32F2F;
}

.dark {
  /* Dark Mode Variables */
  --background: 220 15% 8%;
  --foreground: 220 20% 94%;

  --card: 220 14% 11%;
  --card-foreground: 220 20% 95%;

  --popover: 220 14% 11%;
  --popover-foreground: 220 20% 95%;

  --primary: 220 20% 92%;
  --primary-foreground: 220 15% 10%;

  --secondary: 220 14% 18%;
  --secondary-foreground: 220 20% 92%;

  --muted: 220 14% 16%;
  --muted-foreground: 220 12% 70%;

  --accent: 220 14% 18%;
  --accent-foreground: 220 20% 92%;

  --destructive: 0 72% 51%;
  --destructive-foreground: 220 20% 95%;

  --border: 220 12% 22%;
  --input: 220 12% 22%;
  --ring: 220 16% 78%;

  /* VitaView Specific Overrides */
  --vitaview-background: #0F1115;
  --vitaview-primary: #F2F4F8;
  --vitaview-primary-light: #D7DCE7;
  --vitaview-secondary: #B3BCCB;
  --pure-white: #171A20;
  --background-gray: #0F1115;
  --charcoal-gray: #EDF1F7;
  --medium-gray: #98A1B2;
  --light-gray: #2A2F39;
  --surface-0: #0F1115;
  --surface-1: #171A20;
  --surface-2: #1D2129;
  --surface-3: #2A3039;
  --content-strong: #EEF2F8;
  --content-default: #D8DDE8;
  --content-muted: #AAB3C3;
  --content-subtle: #8D97A9;
  --stroke-soft: #262C35;
  --stroke-default: #353D49;
  --stroke-strong: #4A5564;
  --app-background-image:
    radial-gradient(1200px circle at 4% -20%, rgba(149, 163, 188, 0.18), transparent 48%),
    radial-gradient(900px circle at 100% 0%, rgba(102, 112, 132, 0.2), transparent 46%),
    linear-gradient(160deg, rgba(20, 24, 31, 0.9) 0%, rgba(14, 17, 23, 0.96) 100%);
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply font-sans antialiased bg-background text-foreground;
    font-family: 'Open Sans', system-ui, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overflow-x: hidden;
    background-color: hsl(var(--background));
    background-image: var(--app-background-image);
    background-attachment: fixed;
    color: hsl(var(--foreground));
    transition: background-color 220ms ease, color 220ms ease;
  }

  /* Dark mode bridge for legacy utility classes used across pages/components.
     Keep this in base layer so explicit `dark:*` utilities still win when present. */
  .dark .bg-white {
    background-color: var(--surface-1);
  }

  .dark .bg-gray-50,
  .dark .bg-slate-50 {
    background-color: var(--surface-0);
  }

  .dark .bg-gray-100,
  .dark .bg-slate-100 {
    background-color: var(--surface-2);
  }

  .dark .bg-gray-200,
  .dark .bg-slate-200 {
    background-color: var(--surface-3);
  }

  .dark .text-gray-900,
  .dark .text-slate-900 {
    color: var(--content-strong);
  }

  .dark .text-gray-800,
  .dark .text-slate-800 {
    color: var(--content-default);
  }

  .dark .text-gray-700,
  .dark .text-slate-700 {
    color: var(--content-default);
  }

  .dark .text-gray-600,
  .dark .text-slate-600 {
    color: var(--content-muted);
  }

  .dark .text-gray-500,
  .dark .text-slate-500 {
    color: var(--content-subtle);
  }

  .dark .text-gray-400,
  .dark .text-slate-400 {
    color: #A4ADBD;
  }

  .dark .text-gray-300,
  .dark .text-slate-300 {
    color: #C4CCDA;
  }

  .dark .border-gray-50,
  .dark .border-gray-100,
  .dark .border-slate-100 {
    border-color: var(--stroke-soft);
  }

  .dark .border-gray-200,
  .dark .border-slate-200 {
    border-color: var(--stroke-default);
  }

  .dark .border-gray-300,
  .dark .border-slate-300 {
    border-color: var(--stroke-strong);
  }

  .dark .hover\:bg-white:hover {
    background-color: var(--surface-1);
  }

  .dark .hover\:bg-gray-50:hover,
  .dark .hover\:bg-slate-50:hover {
    background-color: #1A1F27;
  }

  .dark .hover\:bg-gray-100:hover,
  .dark .hover\:bg-slate-100:hover {
    background-color: #252C36;
  }

  .dark .hover\:bg-gray-200:hover,
  .dark .hover\:bg-slate-200:hover {
    background-color: #313A47;
  }

  .dark .hover\:text-gray-700:hover,
  .dark .hover\:text-slate-700:hover,
  .dark .hover\:text-gray-800:hover,
  .dark .hover\:text-slate-800:hover,
  .dark .hover\:text-gray-900:hover,
  .dark .hover\:text-slate-900:hover {
    color: var(--content-strong);
  }

  .dark .from-white {
    --tw-gradient-from: var(--surface-1) var(--tw-gradient-from-position);
    --tw-gradient-to: rgb(23 26 32 / 0) var(--tw-gradient-to-position);
    --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to);
  }

  .dark .to-white {
    --tw-gradient-to: var(--surface-1) var(--tw-gradient-to-position);
  }

  /* Tipografia baseada na linguagem de design */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: 'Montserrat', system-ui, sans-serif;
    font-weight: 700;
    color: hsl(var(--foreground));
  }

  h1 {
    @apply text-4xl md:text-5xl tracking-tight;
  }

  h2 {
    @apply text-2xl md:text-3xl tracking-tight;
  }

  h3 {
    @apply text-xl md:text-2xl;
  }

  h4 {
    @apply text-lg md:text-xl;
  }

  p,
  span,
  label,
  input,
  textarea,
  select {
    font-family: 'Open Sans', system-ui, sans-serif;
  }

  /* Mobile-first responsive typography */
  html {
    font-size: 14px;
    scroll-behavior: smooth;
  }

  @media (min-width: 640px) {
    html {
      font-size: 16px;
    }
  }

  /* Touch optimization */
  button,
  [role="button"],
  input[type="submit"],
  input[type="button"],
  a {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    user-select: none;
  }

  /* Ensure clickable elements are always interactive */
  button,
  [role="button"],
  a[href],
  input[type="submit"],
  input[type="button"] {
    cursor: pointer;
    position: relative;
    z-index: 1;
  }

  /* Fix for iOS Safari button rendering */
  button,
  input[type="submit"],
  input[type="button"] {
    -webkit-appearance: none;
    appearance: none;
  }

  /* Improved tap targets for mobile */
  .tap-target {
    min-height: 44px;
    min-width: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* Focus management for accessibility */
  .focus-visible {
    outline: 2px solid var(--charcoal-gray);
    outline-offset: 2px;
  }

  /* Safe area handling for mobile devices */
  .safe-area-inset {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
}

@layer components {

  /* VitaView Design System - Buttons */
  .btn-primary {
    @apply inline-flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200;
    background-color: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
    font-family: 'Montserrat', system-ui, sans-serif;
    font-weight: 700;
  }

  .btn-primary:hover {
    background-color: var(--vitaview-primary-light);
  }

  .btn-primary:disabled {
    background-color: var(--medium-gray);
    color: var(--light-gray);
  }

  .btn-secondary {
    @apply inline-flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200;
    background-color: transparent;
    color: hsl(var(--foreground));
    border: 1px solid hsl(var(--border));
    font-family: 'Montserrat', system-ui, sans-serif;
    font-weight: 700;
  }

  .btn-secondary:hover {
    background-color: var(--light-gray);
  }

  /* VitaView Design System - Cards */
  .vitaview-card {
    @apply rounded-lg;
    background-color: hsl(var(--card));
    border: 1px solid hsl(var(--border));
  }

  /* VitaView Design System - Forms */
  .vitaview-input {
    @apply w-full rounded-lg px-3 py-2 text-sm transition-all duration-200;
    background-color: hsl(var(--background));
    border: 1px solid hsl(var(--input));
    color: hsl(var(--foreground));
    font-family: 'Open Sans', system-ui, sans-serif;
  }

  .vitaview-input:focus {
    border-color: hsl(var(--ring));
    outline: none;
  }

  .vitaview-input::placeholder {
    color: hsl(var(--muted-foreground));
  }

  .vitaview-input-error {
    border-color: var(--alert-red);
  }

  /* VitaView Design System - Labels */
  .vitaview-label {
    @apply text-sm font-medium mb-1.5 block;
    color: hsl(var(--foreground));
    font-family: 'Montserrat', system-ui, sans-serif;
    font-weight: 700;
  }

  /* Mobile navigation improvements */
  .mobile-nav-backdrop {
    @apply fixed inset-0 backdrop-blur-sm z-40 transition-opacity;
    background-color: rgba(33, 33, 33, 0.5);
  }

  .mobile-nav-panel {
    @apply fixed inset-y-0 left-0 w-64 shadow-xl z-50 transform transition-transform;
    background-color: var(--pure-white);
  }

  .mobile-nav-panel.closed {
    @apply -translate-x-full;
  }

  /* Mobile-optimized cards */
  .mobile-card {
    @apply rounded-lg p-4;
    background-color: var(--pure-white);
    border: 1px solid var(--light-gray);
    margin-bottom: 0.75rem;
  }

  @media (min-width: 640px) {
    .mobile-card {
      @apply p-6;
      margin-bottom: 1rem;
    }
  }

  /* Responsive grid improvements */
  .responsive-grid {
    @apply grid gap-4;
    grid-template-columns: 1fr;
  }

  @media (min-width: 640px) {
    .responsive-grid {
      grid-template-columns: repeat(2, 1fr);
      @apply gap-6;
    }
  }

  @media (min-width: 1024px) {
    .responsive-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  /* Mobile-first form styling */
  .mobile-form-field {
    @apply flex flex-col space-y-2 mb-4;
  }

  .mobile-form-input {
    @apply flex h-10 w-full rounded-lg px-3 py-2 text-sm;
    border: 1px solid var(--light-gray);
    background-color: var(--pure-white);
    font-size: 16px;
    /* Prevents zoom on iOS */
    -webkit-appearance: none;
  }

  /* Loading states optimized for mobile */
  .mobile-loading {
    @apply flex flex-col items-center justify-center p-8 text-center;
  }

  .mobile-loading-spinner {
    @apply animate-spin rounded-full h-8 w-8 mb-4;
    border-bottom: 2px solid var(--charcoal-gray);
  }

  /* Mobile table improvements */
  .mobile-table-wrapper {
    @apply overflow-x-auto -mx-4 px-4;
  }

  .mobile-table {
    @apply w-full text-sm;
    min-width: 600px;
  }

  /* Mobile modal improvements */
  .mobile-modal {
    @apply fixed inset-x-4 top-8 bottom-8 rounded-lg shadow-xl z-50;
    background-color: var(--pure-white);
    max-height: calc(100vh - 4rem);
    overflow-y: auto;
  }

  @media (min-width: 640px) {
    .mobile-modal {
      @apply inset-x-auto max-w-md mx-auto;
      top: 50%;
      bottom: auto;
      transform: translateY(-50%);
    }
  }

  /* Improved mobile buttons */
  .mobile-button {
    @apply inline-flex items-center justify-center rounded-lg text-sm font-medium transition-colors focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50;
    min-height: 44px;
    padding: 0.5rem 1rem;
    font-family: 'Montserrat', system-ui, sans-serif;
    font-weight: 700;
  }

  .mobile-button-lg {
    @apply mobile-button h-12 px-8 text-base;
  }

  /* Mobile-specific animations */
  .slide-up {
    animation: slideUp 0.3s ease-out;
  }

  @keyframes slideUp {
    from {
      transform: translateY(100%);
      opacity: 0;
    }

    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  .fade-in {
    animation: fadeIn 0.2s ease-out;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }

    to {
      opacity: 1;
    }
  }

  /* Mobile-optimized spacing */
  .mobile-section {
    @apply px-4 py-6;
  }

  @media (min-width: 640px) {
    .mobile-section {
      @apply px-6 py-8;
    }
  }

  @media (min-width: 1024px) {
    .mobile-section {
      @apply px-8 py-12;
    }
  }

  /* Sidebar navigation item */
  .sidebar-nav-item {
    @apply w-full flex items-center p-3 rounded-lg transition-all duration-200;
    color: var(--charcoal-gray);
  }

  .sidebar-nav-item:hover {
    background-color: var(--light-gray);
  }

  .sidebar-nav-item.active {
    background-color: var(--charcoal-gray);
    color: var(--pure-white);
  }

  /* Agenda hero: refined, restrained contrast to avoid harsh gradients */
  .agenda-calendar-hero {
    background: linear-gradient(145deg, #202020 0%, #2a2a2a 52%, #333333 100%);
    border-bottom: 1px solid hsl(var(--border));
    box-shadow: inset 0 -1px 0 rgba(255, 255, 255, 0.06);
  }

  .dark .agenda-calendar-hero {
    background: linear-gradient(145deg, #161b24 0%, #1d2330 52%, #252e40 100%);
    border-bottom-color: hsl(var(--border));
    box-shadow: inset 0 -1px 0 rgba(255, 255, 255, 0.08);
  }
}

@layer utilities {

  /* VitaView Text Colors */
  .text-vitaview-primary {
    color: var(--charcoal-gray);
  }

  .text-vitaview-secondary {
    color: var(--medium-gray);
  }

  .text-vitaview-error {
    color: var(--alert-red);
  }

  /* VitaView Background Colors */
  .bg-vitaview-primary {
    background-color: var(--charcoal-gray);
  }

  .bg-vitaview-card {
    background-color: var(--pure-white);
  }

  .bg-vitaview-background {
    background-color: var(--background-gray);
  }

  /* Mobile-specific utilities */
  .text-mobile {
    font-size: 14px;
    line-height: 1.4;
  }

  @media (min-width: 640px) {
    .text-mobile {
      font-size: 16px;
      line-height: 1.5;
    }
  }

  /* Hide scrollbar but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Mobile-friendly hover states */
  .hover-mobile {
    @apply transition-colors duration-200;
  }

  @media (hover: hover) {
    .hover-mobile:hover {
      background-color: var(--light-gray);
    }
  }

  /* Active states for mobile */
  .active-mobile:active {
    background-color: var(--light-gray);
    transform: scale(0.95);
    transition: transform 0.1s;
  }

  /* Mobile-optimized truncation */
  .truncate-mobile {
    @apply truncate;
    max-width: 200px;
  }

  @media (min-width: 640px) {
    .truncate-mobile {
      max-width: 300px;
    }
  }

  @media (min-width: 1024px) {
    .truncate-mobile {
      max-width: none;
    }
  }

  /* Responsive visibility */
  .mobile-only {
    @apply block;
  }

  @media (min-width: 640px) {
    .mobile-only {
      @apply hidden;
    }
  }

  .desktop-only {
    @apply hidden;
  }

  @media (min-width: 640px) {
    .desktop-only {
      @apply block;
    }
  }

  /* Mobile-safe positioning */
  .mobile-fixed-bottom {
    @apply fixed bottom-4 left-4 right-4;
  }

  @media (min-width: 640px) {
    .mobile-fixed-bottom {
      @apply bottom-8 left-auto right-8;
      width: auto;
    }
  }

  /* Performance optimizations */
  .will-change-transform {
    will-change: transform;
  }

  .gpu-accelerated {
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
  }

  /* Mobile interaction optimizations */
  .touch-manipulation {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    user-select: none;
  }

  /* Ensure canvas doesn't block interactions */
  canvas {
    -webkit-user-select: none;
    user-select: none;
  }

  /* Fix z-index stacking for interactive elements */
  .interactive-element {
    position: relative;
    z-index: 10;
    pointer-events: auto;
  }

  /* Mobile menu optimizations */
  .mobile-menu-button {
    position: relative;
    z-index: 10000;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }

  /* Cookie consent optimizations */
  .cookie-consent-button {
    min-height: 44px;
    min-width: 100px;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    cursor: pointer;
    position: relative;
    z-index: 1;
  }

  /* Montserrat font utility */
  .font-heading {
    font-family: 'Montserrat', system-ui, sans-serif;
  }

  /* Open Sans font utility */
  .font-body {
    font-family: 'Open Sans', system-ui, sans-serif;
  }

  /* Landing microinteraction timing */
  .landing-motion {
    --landing-ease: cubic-bezier(0.22, 1, 0.36, 1);
    --landing-fast: 180ms;
    --landing-base: 280ms;
  }

  .landing-motion .transition-all,
  .landing-motion .transition-colors,
  .landing-motion .transition-transform,
  .landing-motion .transition-opacity,
  .landing-motion .transition-shadow {
    transition-timing-function: var(--landing-ease) !important;
    transition-duration: var(--landing-base) !important;
  }

  @media (hover: hover) and (pointer: fine) {
    .landing-motion .hover\:scale-105:hover,
    .landing-motion .hover\:scale-110:hover {
      transform: scale(1.03);
    }
  }

  @media (hover: none) {
    .landing-motion .hover\:scale-105:hover,
    .landing-motion .hover\:scale-110:hover {
      transform: none;
    }
  }
}

/* Accessibility: Respect user preference for reduced motion */
@media (prefers-reduced-motion: reduce) {

  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  /* Framer Motion animations will also be reduced */
  [data-framer-component-type] {
    animation: none !important;
    transition: none !important;
  }

  .slide-up,
  .fade-in {
    animation: none !important;
  }

  /* Keep essential transitions but make them instant */
  .hover-mobile,
  .active-mobile,
  .transition-colors,
  .transition-all,
  .transition-transform,
  .transition-opacity {
    transition-duration: 0ms !important;
  }
}

/* Accessibility: High contrast mode support */
@media (prefers-contrast: high) {
  :root {
    --charcoal-gray: #000000;
    --medium-gray: #555555;
    --light-gray: #CCCCCC;
    --border: 0 0% 40%;
  }

  .btn-primary,
  .mobile-button {
    border: 2px solid currentColor;
  }
}

/* Accessibility: Focus visible improvements */
:focus-visible {
  outline: 3px solid var(--charcoal-gray);
  outline-offset: 2px;
}

/* Skip link for keyboard navigation */
.skip-link {
  position: absolute;
  top: -40px;
  left: 0;
  background: var(--charcoal-gray);
  color: var(--pure-white);
  padding: 8px 16px;
  z-index: 9999;
  font-weight: bold;
}

.skip-link:focus {
  top: 0;
}
